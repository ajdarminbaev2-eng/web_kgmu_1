<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Оценка ультразвуковой активности болезни Крона</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #7f8c8d;
            text-align: center;
            font-size: 16px;
            margin-bottom: 30px;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #34495e;
        }
        
        .input-with-unit {
            display: flex;
            align-items: center;
        }
        
        input[type="number"] {
            width: 100px;
            padding: 8px 12px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .unit {
            margin-left: 10px;
            color: #7f8c8d;
        }
        
        .description {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 5px;
            line-height: 1.4;
        }
        
        .result {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            margin-top: 30px;
            display: none;
        }
        
        .result.active {
            display: block;
        }
        
        .score {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .interpretation {
            font-size: 16px;
            line-height: 1.5;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .authors-info {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 14px;
            color: #555;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .authors-info h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            font-size: 16px;
        }
        
        .author {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .author:last-child {
            margin-bottom: 0;
            border-bottom: none;
        }
        
        .author-name {
            font-weight: bold;
            color: #34495e;
        }
        
        .author-position {
            color: #7f8c8d;
            font-style: italic;
        }
        
        .contact-info {
            margin-top: 5px;
            font-size: 13px;
        }
        
        .disclaimer {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #e74c3c;
            font-size: 13px;
            color: #e74c3c;
            text-align: center;
            font-style: italic;
        }
        
        .references {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 14px;
            color: #555;
            line-height: 1.6;
        }
        
        .references h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            font-size: 16px;
        }
        
        .reference-list {
            font-size: 13px;
            line-height: 1.5;
        }
        
        .reference-item {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .reference-item:last-child {
            margin-bottom: 0;
        }
        
        a {
            color: #3498db;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        .language-switcher {
            text-align: right;
            margin-bottom: 20px;
        }
        
        .lang-btn {
            background-color: #95a5a6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .lang-btn:hover {
            background-color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="language-switcher">
        <button class="lang-btn" id="langBtn">EN</button>
    </div>
    
    <div class="container">
        <h1 id="mainTitle">Оценка ультразвуковой активности болезни Крона</h1>
        <div class="subtitle" id="subTitle">
            Международный индекс ультразвуковой сегментарной активности кишечного воспаления (IBUS-SAS)
        </div>
        
        <form id="calculatorForm">
            <div class="input-group">
                <label for="bwt" id="bwtLabel">Толщина кишечной стенки (BWT)</label>
                <div class="input-with-unit">
                    <input type="number" id="bwt" step="0.1" min="0" required>
                    <span class="unit">ММ</span>
                </div>
            </div>
            
            <div class="input-group">
                <label for="ifat" id="ifatLabel">Воспалительный жир брыжейки (i-fat)</label>
                <input type="number" id="ifat" min="0" max="2" step="1" required>
                <div class="description" id="ifatDescription">
                    0: Отсутствует (в норме)<br>
                    1: Неопределенный<br>
                    2: Присутствует
                </div>
                <div class="error" id="ifatError">Введите значение от 0 до 2</div>
            </div>
            
            <div class="input-group">
                <label for="cds" id="cdsLabel">Цветовой доплеровский сигнал (CDS)</label>
                <input type="number" id="cds" min="0" max="3" step="1" required>
                <div class="description" id="cdsDescription">
                    0: Отсутствует (кровоток не обнаружен)<br>
                    1: Короткие сигналы (минимальное усиление кровотока)<br>
                    2: Длинные сигналы внутри кишечной стенки (умеренное усиление кровотока)<br>
                    3: Длинные сигналы внутри и за пределами кишечной стенки (выраженное усиление кровотока)
                </div>
                <div class="error" id="cdsError">Введите значение от 0 до 3</div>
            </div>
            
            <div class="input-group">
                <label for="bws" id="bwsLabel">Дифференциация слоев кишечной стенки (BWS)</label>
                <input type="number" id="bws" min="0" max="3" step="1" required>
                <div class="description" id="bwsDescription">
                    0: Норма<br>
                    1: Неопределенно<br>
                    2: Очаговые изменения (&lt;3 см)<br>
                    3: Значительные изменения (&gt;3 см)
                </div>
                <div class="error" id="bwsError">Введите значение от 0 до 3</div>
            </div>
            
            <button type="submit" id="calculateBtn">Рассчитать IBUS-SAS</button>
        </form>
        
        <div class="result" id="result">
            <div class="score">IBUS-SAS: <span id="scoreValue">0</span></div>
            <div class="interpretation" id="interpretation"></div>
        </div>
    </div>

    <div class="authors-info">
        <h3 id="authorsTitle">Информация об авторах</h3>
        
        <div class="author">
            <div class="author-name" id="author1Name">Shamsullina Adelya Fanisovna</div>
            <div class="author-position" id="author1Position">Student of the General Medicine Faculty, Kazan State Medical University</div>
            <div class="contact-info">
                Tel.: <a href="tel:89172591734">8-917-259-17-34</a> | 
                E-mail: <a href="mailto:shamsullina.af@mail.ru">shamsullina.af@mail.ru</a>
            </div>
        </div>
        
        <div class="author">
            <div class="author-name" id="author2Name">Mukhametova Dilyara Damirovna</div>
            <div class="author-position" id="author2Position">Assistant of Professor of the Hospital Therapy Department, Kazan State Medical University, PhD in Medical Sciences</div>
        </div>
        
        <div class="disclaimer" id="disclaimerText">
            Калькулятор носит ознакомительный характер. Авторы не несут ответственности за принятые решения и их последствия.
        </div>
    </div>

    <div class="references">
        <h3 id="referencesTitle">References</h3>
        <div class="reference-list">
            <div class="reference-item">
                1. Novak K. L., Nylund K., Maaser C. Expert Consensus on Optimal Acquisition and Development of the International Bowel Ultrasound Segmental Activity Score [IBUS-SAS]: A Reliability and Inter-rater Variability Study on Intestinal Ultrasonography in Crohn's Disease. Journal of Crohn's and Colitis. 2021;15(4):609–616. doi: 10.1093/ecco-jcc/jjaa216.
            </div>
            <div class="reference-item">
                2. Dragoni G, Gottin M, Innocenti T, Lynch EN, Bagnoli S, Macrì G, Bonanomi AG, Orlandini B, Rogai F, Milani S, Galli A, Milla M, Biagini MR. Correlation of Ultrasound Scores with Endoscopic Activity in Crohn's Disease: A Prospective Exploratory Study. J Crohns Colitis. 2023 Oct 20;17(9):1387-1394. doi: 10.1093/ecco-jcc/jjad068.
            </div>
            <div class="reference-item">
                3. Allocca M, Dell'Avalle C, Zilli A, Furfaro F, D'Amico F, Jairath V, Rubin DT, Peyrin-Biroulet L, Fiorino G, Danese S. Ultrasound remission after biologic induction and long-term endoscopic remission in Crohn's disease: a prospective cohort study. EClinicalMedicine. 2024 Mar 21;71:102559. doi: 10.1016/j.eclinm.2024.102559.
            </div>
            <div class="reference-item">
                4. Long X, Peng C, Zhang X, Kong W, Gong L. Different imaging techniques' diagnostic efficacy for Crohn's disease activity and external validation and comparison of MDCTAs, SES-CD and IBUSSAS. BMC Gastroenterol. 2024 Aug 20;24(1):277. doi: 10.1186/s12876-024-03376-8.
            </div>
        </div>
    </div>

    <script>
        // Тексты для разных языков
        const translations = {
            ru: {
                mainTitle: "Оценка ультразвуковой активности болезни Крона",
                subTitle: "Международный индекс ультразвуковой сегментарной активности кишечного воспаления (IBUS-SAS)",
                bwtLabel: "Толщина кишечной стенки (BWT)",
                ifatLabel: "Воспалительный жир брыжейки (i-fat)",
                ifatDescription: `0: Отсутствует (в норме)<br>
1: Неопределенный<br>
2: Присутствует`,
                cdsLabel: "Цветовой доплеровский сигнал (CDS)",
                cdsDescription: `0: Отсутствует (кровоток не обнаружен)<br>
1: Короткие сигналы (минимальное усиление кровотока)<br>
2: Длинные сигналы внутри кишечной стенки (умеренное усиление кровотока)<br>
3: Длинные сигналы внутри и за пределами кишечной стенки (выраженное усиление кровотока)`,
                bwsLabel: "Дифференциация слоев кишечной стенки (BWS)",
                bwsDescription: `0: Норма<br>
1: Неопределенно<br>
2: Очаговые изменения (&lt;3 см)<br>
3: Значительные изменения (&gt;3 см)`,
                calculateBtn: "Рассчитать IBUS-SAS",
                authorsTitle: "Информация об авторах",
                author1Name: "Shamsullina Adelya Fanisovna",
                author1Position: "Student of the General Medicine Faculty, Kazan State Medical University",
                author2Name: "Mukhametova Dilyara Damirovna",
                author2Position: "Assistant of Professor of the Hospital Therapy Department, Kazan State Medical University, PhD in Medical Sciences",
                disclaimerText: "Калькулятор носит ознакомительный характер. Авторы не несут ответственности за принятые решения и их последствия.",
                referencesTitle: "References",
                ifatError: "Введите значение от 0 до 2",
                cdsError: "Введите значение от 0 до 3",
                bwsError: "Введите значение от 0 до 3",
                interpretation1: "Прогнозирует эндоскопическую активность с высокой чувствительностью (94%) и специфичностью (91%).",
                interpretation2: "Пограничный результат / легкое воспаление.",
                interpretation3: "Прогнозирует эндоскопическую ремиссию с чувствительностью 95% и специфичностью 83%."
            },
            en: {
                mainTitle: "Crohn's Disease Ultrasound Activity Assessment",
                subTitle: "International Bowel Ultrasound Segmental Activity Score (IBUS-SAS)",
                bwtLabel: "Bowel Wall Thickness (BWT)",
                ifatLabel: "Inflammatory Mesenteric Fat (i-fat)",
                ifatDescription: `0: Absent (normal)<br>
1: Indeterminate<br>
2: Present`,
                cdsLabel: "Color Doppler Signal (CDS)",
                cdsDescription: `0: Absent (no blood flow detected)<br>
1: Short signals (minimal blood flow enhancement)<br>
2: Long signals within the bowel wall (moderate blood flow enhancement)<br>
3: Long signals within and beyond the bowel wall (marked blood flow enhancement)`,
                bwsLabel: "Bowel Wall Stratification (BWS)",
                bwsDescription: `0: Normal<br>
1: Indeterminate<br>
2: Focal changes (&lt;3 cm)<br>
3: Extensive changes (&gt;3 cm)`,
                calculateBtn: "Calculate IBUS-SAS",
                authorsTitle: "Author Information",
                author1Name: "Shamsullina Adelya Fanisovna",
                author1Position: "Student of the General Medicine Faculty, Kazan State Medical University",
                author2Name: "Mukhametova Dilyara Damirovna",
                author2Position: "Assistant of Professor of the Hospital Therapy Department, Kazan State Medical University, PhD in Medical Sciences",
                disclaimerText: "The calculator is for informational purposes only. The authors are not responsible for decisions made and their consequences.",
                referencesTitle: "References",
                ifatError: "Enter a value from 0 to 2",
                cdsError: "Enter a value from 0 to 3",
                bwsError: "Enter a value from 0 to 3",
                interpretation1: "Predicts endoscopic activity with high sensitivity (94%) and specificity (91%).",
                interpretation2: "Borderline result / mild inflammation.",
                interpretation3: "Predicts endoscopic remission with sensitivity 95% and specificity 83%."
            }
        };

        let currentLang = 'ru';

        // Функция переключения языка
        function switchLanguage() {
            currentLang = currentLang === 'ru' ? 'en' : 'ru';
            updateTexts();
            document.getElementById('langBtn').textContent = currentLang === 'ru' ? 'EN' : 'RU';
        }

        // Функция обновления текстов
        function updateTexts() {
            const lang = translations[currentLang];
            
            document.getElementById('mainTitle').textContent = lang.mainTitle;
            document.getElementById('subTitle').textContent = lang.subTitle;
            document.getElementById('bwtLabel').textContent = lang.bwtLabel;
            document.getElementById('ifatLabel').textContent = lang.ifatLabel;
            document.getElementById('ifatDescription').innerHTML = lang.ifatDescription;
            document.getElementById('cdsLabel').textContent = lang.cdsLabel;
            document.getElementById('cdsDescription').innerHTML = lang.cdsDescription;
            document.getElementById('bwsLabel').textContent = lang.bwsLabel;
            document.getElementById('bwsDescription').innerHTML = lang.bwsDescription;
            document.getElementById('calculateBtn').textContent = lang.calculateBtn;
            document.getElementById('authorsTitle').textContent = lang.authorsTitle;
            document.getElementById('author1Name').textContent = lang.author1Name;
            document.getElementById('author1Position').textContent = lang.author1Position;
            document.getElementById('author2Name').textContent = lang.author2Name;
            document.getElementById('author2Position').textContent = lang.author2Position;
            document.getElementById('disclaimerText').textContent = lang.disclaimerText;
            document.getElementById('referencesTitle').textContent = lang.referencesTitle;
            document.getElementById('ifatError').textContent = lang.ifatError;
            document.getElementById('cdsError').textContent = lang.cdsError;
            document.getElementById('bwsError').textContent = lang.bwsError;
        }

        // Инициализация переключения языка
        document.getElementById('langBtn').addEventListener('click', switchLanguage);

        // Калькулятор
        document.getElementById('calculatorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Получаем значения
            const bwt = parseFloat(document.getElementById('bwt').value);
            const ifat = parseInt(document.getElementById('ifat').value);
            const cds = parseInt(document.getElementById('cds').value);
            const bws = parseInt(document.getElementById('bws').value);
            
            // Проверяем валидность данных
            let isValid = true;
            
            if (ifat < 0 || ifat > 2 || isNaN(ifat)) {
                document.getElementById('ifatError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('ifatError').style.display = 'none';
            }
            
            if (cds < 0 || cds > 3 || isNaN(cds)) {
                document.getElementById('cdsError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('cdsError').style.display = 'none';
            }
            
            if (bws < 0 || bws > 3 || isNaN(bws)) {
                document.getElementById('bwsError').style.display = 'block';
                isValid = false;
            } else {
                document.getElementById('bwsError').style.display = 'none';
            }
            
            if (isNaN(bwt) || bwt < 0) {
                isValid = false;
            }
            
            if (!isValid) return;
            
            // Рассчитываем результат
            const score = 4 * bwt + 15 * ifat + 7 * cds + 4 * bws;
            
            // Отображаем результат
            document.getElementById('scoreValue').textContent = score.toFixed(1);
            
            // Определяем интерпретацию
            const lang = translations[currentLang];
            let interpretation = '';
            if (score > 37.5) {
                interpretation = lang.interpretation1;
            } else if (score >= 22.8 && score <= 37.5) {
                interpretation = lang.interpretation2;
            } else if (score < 22.8) {
                interpretation = lang.interpretation3;
            }
            
            document.getElementById('interpretation').textContent = interpretation;
            document.getElementById('result').classList.add('active');
            
            // Прокручиваем к результатам
            document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>
